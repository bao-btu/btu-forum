(function(A){A.tabbedPane=function(B,C){var F=this,H=A(B),G={paneContext:H,paneSelectedClassName:"b-pane--selected",paneSelector:".b-tabbed-pane__pane",isResponsive:false,tabSetSelector:".b-tabbed-pane__tabs",tabSelectedClassName:"b-tab--selected",tabSelector:".b-tabbed-pane__tab"},E;F.init=function(){F.settings=E=A.extend({},G,C);H.data("tabbedPane",{});E.tabSelectedClass="."+E.tabSelectedClassName;E.paneSelectedClass="."+E.paneSelectedClassName;F.getTabs();F.bindTabClicks();if(E.isResponsive){F.bindFitTabs()}};F.getTabs=function(){var I;F.tabs=H.find(E.tabSelector);F.panes=A(),F.tabs.each(function(){var K=A(this),J=K.children("a");K.data("tabbedPane",{});targetId=J.attr("href");targetId=targetId.match(/#([^\?]+)/)[0].substr(1);I=E.paneContext.find("#"+targetId);if(I.length){F.panes=F.panes.add(I);K.data("tabbedPane").pane=I}else{F.tabs=F.tabs.not(K)}})};F.bindTabClicks=function(){F.tabs.children("a").bind("click.tabbedPane",function(I){I.preventDefault();F.selectTab(A(this),E.callback)})};F.bindFitTabs=function(){H.bind("testfit",function(){var J=A(F.tabs[0]),I=A(F.tabs[F.tabs.length-1]);H.find(E.tabSetSelector).removeClass("b-tabbed-pane__tabs--stacked");if(I.offset().top>J.offset().top){H.find(E.tabSetSelector).addClass("b-tabbed-pane__tabs--stacked")}});triggerTestFit=function(){H.trigger("testfit")};A(window).bind("load resize orientationchange",A.debounce(300,triggerTestFit))};F.selectTab=function(J,M){var K=window.location,L=K.hash.match(/^[^\?]*/)[0],I=J.parent().data("tabbedPane").pane;if(!J.hasClass(E.tabActiveClass)||!I.hasClass(E.paneActiveClass)){D(J,I,M)}};F.publicMethods={};var D=function(J,I,K){F.tabs.filter(E.tabSelectedClass).removeClass(E.tabSelectedClassName).children().removeClass(E.tabSelectedClassName);J.parent().addClass(E.tabSelectedClassName).children().addClass(E.tabSelectedClassName);F.panes.filter(E.paneSelectedClass).removeClass(E.paneSelectedClassName);I.addClass(E.paneSelectedClassName);if(typeof K==="function"){K.apply()}};F.init()};A.fn.tabbedPane=function(C){var B=arguments;return this.each(function(){var E=A(this),D=E.data("tabbedPane");if(undefined===D){D=new A.tabbedPane(this,C);E.data("tabbedPane",D)}if(D.publicMethods[C]){return D.publicMethods[C](Array.prototype.slice.call(B,1))}})}})(jQuery);